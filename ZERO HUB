-- Variables globales
getgenv().AutoFarm = false
getgenv().AutoBuso = false
getgenv().FastAttack = false
getgenv().AutoQuest = false

-- Funciones de Farm
local function StartAutoFarm()
    spawn(function()
        while getgenv().AutoFarm do
            pcall(function()
                if getgenv().AutoFarm then
                    for i,v in pairs(workspace.Enemies:GetChildren()) do
                        if v.Humanoid.Health > 0 and v:FindFirstChild("Humanoid") and v:FindFirstChild("HumanoidRootPart") then
                            repeat wait()
                                game:GetService("Players").LocalPlayer.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * CFrame.new(0,30,0)
                                game:GetService("Players").LocalPlayer.Character.Humanoid:ChangeState(11)
                                v.HumanoidRootPart.Size = Vector3.new(60,60,60)
                                v.HumanoidRootPart.Transparency = 0.9
                                v.Humanoid.JumpPower = 0
                                v.Humanoid.WalkSpeed = 0
                                v.HumanoidRootPart.CanCollide = false
                                if not game.Players.LocalPlayer.Character:FindFirstChild("HasBuso") then
                                    local args = {
                                        [1] = "Buso"
                                    }
                                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                                end
                                game:GetService'VirtualUser':CaptureController()
                                game:GetService'VirtualUser':Button1Down(Vector2.new(1280, 672))
                            until not getgenv().AutoFarm or v.Humanoid.Health <= 0
                        end
                    end
                end
            end)
        end
    end)
end

local function StartAutoBuso()
    spawn(function()
        while getgenv().AutoBuso do wait(1)
            if not game.Players.LocalPlayer.Character:FindFirstChild("HasBuso") then
                local args = {
                    [1] = "Buso"
                }
                game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
            end
        end
    end)
end

local function StartFastAttack()
    spawn(function()
        while getgenv().FastAttack do wait()
            pcall(function()
                game:GetService'VirtualUser':CaptureController()
                game:GetService'VirtualUser':Button1Down(Vector2.new(1280, 672))
            end)
        end
    end)
end

-- Función mejorada para crear toggles
local function CreateToggle(parent, text, position, callback)
    local ToggleFrame = Instance.new("Frame")
    local UICorner = Instance.new("UICorner")
    local Title = Instance.new("TextLabel")
    local ToggleButton = Instance.new("TextButton")
    local UICorner_2 = Instance.new("UICorner")

    ToggleFrame.Name = text.."_Toggle"
    ToggleFrame.Parent = parent
    ToggleFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
    ToggleFrame.Position = position
    ToggleFrame.Size = UDim2.new(0, 180, 0, 40)

    UICorner.CornerRadius = UDim.new(0, 6)
    UICorner.Parent = ToggleFrame

    Title.Name = "Title"
    Title.Parent = ToggleFrame
    Title.BackgroundTransparency = 1
    Title.Position = UDim2.new(0, 15, 0, 0)
    Title.Size = UDim2.new(0, 130, 1, 0)
    Title.Font = Enum.Font.GothamSemibold
    Title.Text = text
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.TextSize = 14
    Title.TextXAlignment = Enum.TextXAlignment.Left

    ToggleButton.Name = "ToggleButton"
    ToggleButton.Parent = ToggleFrame
    ToggleButton.BackgroundColor3 = Color3.fromRGB(255, 65, 65)
    ToggleButton.Position = UDim2.new(1, -55, 0.5, -15)
    ToggleButton.Size = UDim2.new(0, 40, 0, 30)
    ToggleButton.Font = Enum.Font.GothamSemibold
    ToggleButton.Text = "OFF"
    ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    ToggleButton.TextSize = 13.000
    ToggleButton.AutoButtonColor = false

    UICorner_2.CornerRadius = UDim.new(0, 6)
    UICorner_2.Parent = ToggleButton

    local toggled = false
    ToggleButton.MouseButton1Click:Connect(function()
        toggled = not toggled
        if toggled then
            ToggleButton.Text = "ON"
            ToggleButton.BackgroundColor3 = Color3.fromRGB(65, 255, 65)
        else
            ToggleButton.Text = "OFF"
            ToggleButton.BackgroundColor3 = Color3.fromRGB(255, 65, 65)
        end
        callback(toggled)
    end)

    return ToggleFrame
end

-- Crear tabs
local function CreateFarmingTab(parent)
    local FarmingPage = Instance.new("ScrollingFrame")
    FarmingPage.Name = "FarmingPage"
    FarmingPage.Parent = parent
    FarmingPage.Active = true
    FarmingPage.BackgroundTransparency = 1
    FarmingPage.Position = UDim2.new(0, 10, 0, 10)
    FarmingPage.Size = UDim2.new(1, -20, 1, -20)
    FarmingPage.CanvasSize = UDim2.new(0, 0, 2, 0)
    FarmingPage.ScrollBarThickness = 3

    -- Auto Farm
    CreateToggle(FarmingPage, "Auto Farm", UDim2.new(0, 0, 0, 10), function(bool)
        getgenv().AutoFarm = bool
        if bool then
            StartAutoFarm()
        end
    end)

    -- Auto Buso
    CreateToggle(FarmingPage, "Auto Buso", UDim2.new(0, 0, 0, 60), function(bool)
        getgenv().AutoBuso = bool
        if bool then
            StartAutoBuso()
        end
    end)

    -- Fast Attack
    CreateToggle(FarmingPage, "Fast Attack", UDim2.new(0, 0, 0, 110), function(bool)
        getgenv().FastAttack = bool
        if bool then
            StartFastAttack()
        end
    end)

    -- Auto Quest
    CreateToggle(FarmingPage, "Auto Quest", UDim2.new(0, 0, 0, 160), function(bool)
        getgenv().AutoQuest = bool
    end)

    -- Sea 1 Bosses
    local BossLabel = Instance.new("TextLabel")
    BossLabel.Name = "BossLabel"
    BossLabel.Parent = FarmingPage
    BossLabel.BackgroundTransparency = 1
    BossLabel.Position = UDim2.new(0, 0, 0, 220)
    BossLabel.Size = UDim2.new(1, 0, 0, 30)
    BossLabel.Font = Enum.Font.GothamBold
    BossLabel.Text = "Sea 1 Bosses"
    BossLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    BossLabel.TextSize = 16

    local Sea1Bosses = {
        "The Gorilla King",
        "Bobby",
        "Yeti",
        "Mob Leader",
        "Vice Admiral",
        "Warden",
        "Chief Warden",
        "Swan",
        "Magma Admiral",
        "Fishman Lord",
        "Wysper",
        "Thunder God",
        "Cyborg"
    }

    for i, bossName in ipairs(Sea1Bosses) do
        CreateToggle(FarmingPage, bossName, UDim2.new(0, 0, 0, 250 + ((i-1) * 50)), function(bool)
            getgenv()[bossName.."Farm"] = bool
        end)
    end

    return FarmingPage
end

-- Crear el menú principal
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ZEIRO_HUB"
ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
MainFrame.Position = UDim2.new(0.5, -300, 0.5, -200)
MainFrame.Size = UDim2.new(0, 600, 0, 400)
MainFrame.ClipsDescendants = true
MainFrame.Active = true
MainFrame.Draggable = true

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 8)
UICorner.Parent = MainFrame

local ContentFrame = Instance.new("Frame")
ContentFrame.Name = "ContentFrame"
ContentFrame.Parent = MainFrame
ContentFrame.BackgroundTransparency = 1
ContentFrame.Position = UDim2.new(0, 10, 0, 40)
ContentFrame.Size = UDim2.new(1, -20, 1, -50)

-- Crear la página de farming
local FarmingPage = CreateFarmingTab(ContentFrame)
FarmingPage.Visible = true

-- Tecla para mostrar/ocultar
game:GetService("UserInputService").InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.RightControl then
        MainFrame.Visible = not MainFrame.Visible
    end
end)

-- Notificación inicial
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "ZEIRO HUB",
    Text = "Cargado correctamente!\nUsa RightControl para abrir/cerrar",
    Duration = 5
})
